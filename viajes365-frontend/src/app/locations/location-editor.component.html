<div class="p-4">
  <div class="container" style="
        background-color: rgba(255, 255, 255, 0.4);
        border-radius: 4px;
        padding: 10px 10px;
        box-shadow: 0 0 25px -6px rgba(0, 0, 0, 0.9);
      ">
    <h4 *ngIf="isAddMode">
      <i class="bi-geo-alt-fill" style="color: black; margin-right: 8px"></i>Agregar
      Locación
    </h4>
    <h4 *ngIf="!isAddMode">
      <i class="bi-geo-alt-fill" style="color: black; margin-right: 8px"></i>Editar
      Locación
    </h4>
    <hr />
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="row g-2">
        <div class="form-group col">
          <div class="form-floating">
            <input type="text" formControlName="locationName" class="form-control" placeholder="Administrador"
              [ngClass]="{ 'is-invalid': submitted && f.locationName.errors }" id="locationName" />
            <label for="name">Nombre</label>
            <div *ngIf="submitted && f.locationName.errors" class="invalid-feedback">
              <div *ngIf="f.locationName.errors.required">
                Nombre de la locación es obligatorio
              </div>
            </div>
          </div>
        </div>

        <div class="form-group col">
          <div class="form-floating">
            <input type="text" formControlName="fullAddress" class="form-control" placeholder="Administrador"
              [ngClass]="{ 'is-invalid': submitted && f.fullAddress.errors }" id="fullAddress" />
            <label for="name">Direcci&oacute;n</label>
            <div *ngIf="submitted && f.fullAddress.errors" class="invalid-feedback">
              <div *ngIf="f.fullAddress.errors.required">
                Direcci&oacute;n de la locación es obligatoria
              </div>
            </div>
          </div>
        </div>
      </div>

      <br />

      <div class="row g-3">
        <div class="form-group col">
          <div class="form-floating">
            <input type="text" formControlName="note" class="form-control" placeholder="Administrador"
              [ngClass]="{ 'is-invalid': submitted && f.note.errors }" id="note" />
            <label for="name">Nota</label>
            <div *ngIf="submitted && f.note.errors" class="invalid-feedback">
              <div *ngIf="f.note.errors.required">
                Nota de locación es obligatoria
              </div>
            </div>
          </div>
        </div>

        <div class="form-group col">
          <div class="form-floating">
            <select formControlName="cityId" class="form-select" id="cityId" aria-label="cityId"
              (change)="cityChange($event)" [ngClass]="{ 'is-invalid': submitted && f.cityId.errors }"
              [ngbTooltip]="tipContent">
              <option *ngFor="let city of citiesCollection" value="{{ city.cityId }}">
                {{ city.name }}
              </option>
            </select>
            <ng-template #tipContent>
              <p>Si no encuentra la ciudad deseada, elige la m&aacute;s cerna</p>
            </ng-template>
            <label for="cityId" data-bs-toggle="popover" title="Popover title"
              data-bs-content="And here's some amazing content. It's very engaging. Right?">Ciudad clima</label>
            <div *ngIf="submitted && f.cityId.errors" class="invalid-feedback">
              <div *ngIf="f.cityId.errors.required">C&oacute;digo de la ciudad es obligatorio</div>
            </div>
          </div>
        </div>

        <div class="form-group col">
          <div style="
                display: block;
                background-color: rgba(255, 255, 255);
                border-radius: 4px;
                padding-left: 0.5rem;
                padding-top: 0.2rem;
              ">
            <label style="color: grey; font-size: small">Activo</label>
            <div class="form-check form-switch" style="margin-top: 0.3rem">
              <input class="form-check-input" type="checkbox" formControlName="active"
                [ngClass]="{ 'is-invalid': submitted && f.active.errors }" (change)="activeToggle()" />
              <label class="form-check-label" for="Active">{{
                activeLabel
                }}</label>
            </div>
            <div *ngIf="submitted && f.active.errors" class="invalid-feedback">
              <div *ngIf="f.active.errors.required">Activo es obligatorio</div>
            </div>
          </div>
        </div>
      </div>

      <hr />

      <div class="row">
        <div class="form-group">
          <div style="float: right">
            <button [disabled]="loading" class="btn btn-primary me-2">
              <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>
              Guardar
            </button>
            <button class="btn btn-secondary" routerLink="/locations">
              Cancelar
            </button>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>